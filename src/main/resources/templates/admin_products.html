<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head th:replace="~{layout :: head('Admin â€“ Produkte')}"></head>
<body>
<header th:replace="~{layout :: header}"></header>
<main class="container admin">
    <div class="admin-header">
        <h1>ğŸ“¦ Produkte verwalten</h1>
        <a class="btn primary" th:href="@{/admin/products/new}">Neues Produkt</a>
    </div>
    <!-- Produkttabelle -->
    <section class="card glass">
        <div class="table-wrap">
            <table class="table products">
                <thead class="product-bar">
                <tr>
                    <th>ID</th>
                    <th>Bild</th>
                    <th>Name</th>
                    <th>Kategorie</th>
                    <th>Preis</th>
                    <th>Lager</th>
                    <th>Aktionen</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p : ${page.content}">
                    <td th:text="${p.id}">1</td>
                    <td> <img th:if="${p.imageUrlResolved}" th:src="${p.imageUrlResolved}" alt="Produktbild" class="product-image" loading="lazy"/></td>
                    <td th:text="${p.name}">Produktname</td>
                    <td th:text="${p.category != null ? p.category.name : 'Kategorie'}">Kategorie</td>
                    <td th:text="|${#numbers.formatDecimal(p.priceCents / 100.0, 1, 'COMMA', 2, 'POINT')} â‚¬|">0,00&nbsp;â‚¬</td>
                    <td th:text="${p.stock != null ? p.stock : 0}">0</td>
                    <td class="actions">
                        <a class="btn small" th:href="@{|/admin/products/${p.id}/edit|}">âœï¸</a>
                        <form th:action="@{|/admin/products/${p.id}/delete|}" method="post" class="inline">
                            <div th:replace="~{fragments/csrf :: csrf}"></div>
                            <button type="submit" class="btn small danger" onclick="return confirm('Produkt wirklich lÃ¶schen?')">ğŸ—‘ï¸</button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
    <!-- Pagination -->
    <div class="pager" th:if="${page.totalPages > 1}">
        <a th:if="${page.number>0}" th:href="@{|/admin/products?page=${page.number-1}&q=${q}|}" class="btn secondary small">Â« ZurÃ¼ck</a>
        <span>Seite <b th:text="${page.number+1}"></b> / <b th:text="${page.totalPages}"></b></span>
        <a th:if="${page.number+1 < page.totalPages}" th:href="@{|/admin/products?page=${page.number+1}&q=${q}|}" class="btn secondary small">Weiter Â»</a>
    </div>
</main>
</body>
</html>