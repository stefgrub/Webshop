<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head th:replace="~{layout :: head('Kasse')}"></head>
<body>
<header th:replace="~{layout :: header}"></header>
<main class="container">
    <h1>üßæ Zur Kasse</h1>
    <section th:if="${#lists.isEmpty(lines)}">
        <p>Dein Warenkorb ist leer.</p>
        <a th:href="@{/}" class="btn secondary">Zur√ºck zum Shop</a>
    </section>
    <section th:if="${!#lists.isEmpty(lines)}" class="card glass">
        <h2>Lieferadresse</h2>
        <form action="#" th:action="@{/checkout}" method="post" class="checkout-form">
            <div class="grid">
                <label>Vollst√§ndiger Name
                    <input type="text"
                           id="fullName"
                           name="fullName"
                           required
                           minlength="3"
                           autocomplete="name"/>
                </label>
                <label>Stra√üe und Hausnummer
                    <input type="text"
                           id="street"
                           name="street"
                           required
                           minlength="3"
                           autocomplete="street-address"/>
                </label>
                <label>PLZ
                    <input type="text"
                           id="postalCode"
                           name="postalCode"
                           required
                           inputmode="numeric"
                           autocomplete="postal-code"/>
                </label>
                <label>Ort
                    <input type="text"
                           id="city"
                           name="city"
                           required
                           minlength="2"
                           autocomplete="address-level2"/>
                </label>
                <label>Land
                    <input type="text"
                           id="country"
                           name="country"
                           value="Deutschland"
                           required
                           autocomplete="country-name"/>
                </label>
            </div>

            <div class="field" style="margin-top: 1rem;">
                <label>
                    <input type="checkbox" id="rememberAddress" checked>
                    Lieferadresse f√ºr das n√§chste Mal merken
                </label>
            </div>

            <h2>Bestell√ºbersicht</h2>
            <table class="table">
                <thead>
                <tr>
                    <th>Produkt</th>
                    <th>Menge</th>
                    <th>Preis</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="e : ${lines.entrySet()}">
                    <td th:text="${e.key.name}">Produktname</td>
                    <td th:text="${e.value}">1</td>
                    <td th:text="${#numbers.formatDecimal((e.key.priceCents * e.value)/100.0,1,'COMMA',2,'POINT')} + ' ‚Ç¨'">
                        0,00 ‚Ç¨
                    </td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <th colspan="2" style="text-align:right">Gesamt:</th>
                    <th th:text="${#numbers.formatDecimal(totalCents/100.0,1,'COMMA',2,'POINT')} + ' ‚Ç¨'">0,00 ‚Ç¨</th>
                </tr>
                </tfoot>
            </table>

            <div class="actions">
                <input type="hidden" name="_csrf" th:if="${_csrf != null}" th:value="${_csrf?.token}" />
                <button type="submit" class="btn primary">üõçÔ∏è Jetzt kaufen</button>
                <a th:href="@{/cart}" class="btn secondary">‚Üê Zur√ºck</a>
            </div>
        </form>
    </section>
</main>
<footer th:replace="~{layout :: footer}"></footer>
<script th:src="@{/js/checkout-autofill.js}"></script>
</body>
</html>