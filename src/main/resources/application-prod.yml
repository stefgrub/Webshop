maintenance:
  enabled: true
  end: 2025-11-02T22:00:00+01:00
  message: "Wartungsarbeiten: Heute kann es zu Unterbrechungen kommen."
  homepage-only: false   # true = nur Startseite; false = auf allen Seiten

spring:
  config:
    import: optional:configtree:/run/secrets/

  datasource:
    url: jdbc:postgresql://db:5432/${db_name}
    username: ${db_user}
    password: ${db_password}
    hikari:
      keepalive-time: 300000
      validation-timeout: 5000
      leak-detection-threshold: 20000

  jpa:
    open-in-view: true

  flyway:
    enabled: true
    locations: classpath:db/migration
    validate-migration-naming: true

server:
  compression:
    enabled: false
  forward-headers-strategy: framework
  servlet:
    session:
      timeout: 30m
      cookie:
        secure: true
        same-site: Lax

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true
      show-details: never

logging:
  level:
    root: INFO
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: OFF
    com.zaxxer.hikari: WARN
    org.flywaydb.core: INFO
    com.example.shop: INFO

recaptcha:
  enabled: true
  site-key: ${RECAPTCHA_SITE_KEY}
  secret-key: ${RECAPTCHA_SECRET_KEY}

app:
  mail:
    from:
      address: ${MAIL_FROM_ADDRESS:noreply@viewwebshop.at}
      name: ${MAIL_FROM_NAME:ViewWebshop}

webshop:
  ai:
    base-url: https://tools.viewwebshop.at
    bearer-token: ${AI_BEARER_TOKEN}