<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title>Produkte</title></head>
<body>
<h1>Produkte</h1>
<form method="get">
    <input name="q" th:value="${q}" placeholder="Suche…">
    <button>Suche</button>
    <a th:href="@{/admin/products/new}">Neu</a>
</form>

<table>
    <thead><tr><th>Name</th><th>Preis</th><th>Kategorie</th><th></th></tr></thead>
    <tbody>
    <tr th:each="p : ${page.content}">
        <td th:text="${p.name}"></td>
        <td th:text="${#numbers.formatDecimal(p.priceCents/100.0, 1, 2)} + ' €'"></td>
        <td th:text="${p.category != null ? p.category.name : '-'}"></td>
        <td>
            <a th:href="@{|/admin/products/${p.id}/edit|}">Bearbeiten</a>
            <form th:action="@{|/admin/products/${p.id}/delete|}" method="post" style="display:inline">
                <button type="submit">Löschen</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div>
    <a th:if="${page.number>0}" th:href="@{|/admin/products?page=${page.number-1}&q=${q}|}">« Zurück</a>
    <span th:text="${page.number+1}">1</span>/<span th:text="${page.totalPages}">1</span>
    <a th:if="${page.number+1 < page.totalPages}" th:href="@{|/admin/products?page=${page.number+1}&q=${q}|}">Weiter »</a>
</div>
</body>
</html>
